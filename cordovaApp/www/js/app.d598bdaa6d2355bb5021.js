webpackJsonp([1],{"1q8h":function(t,e){},"5fH6":function(t,e){},"7QVd":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("Dd8w"),o=a.n(i),s=a("NYxO"),r=null,c={baxeX:r,created:function(){r=this},data:function(){return{}},computed:o()({},Object(s.c)(["$NearbyAttractionsList"]),Object(s.c)(["$locationLat"]),Object(s.c)(["$locationLng"]),Object(s.c)(["$loading"]),Object(s.c)(["$Details"]),Object(s.c)(["$PhotosUrl"])),methods:o()({},Object(s.b)(["$PostValue"]))},l=a("VU/8")(c,null,!1,null,null,null).exports,u={extends:l,name:"App"},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.$loading,expression:"$loading"}],staticClass:"demo-spin-col"},[e("img",{attrs:{src:a("QK3a")}}),this._v(" "),e("div",[this._v("Loading...")])]),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(t){a("TAHN")},null,null).exports,h=a("/ocq"),g={extends:l,data:function(){return{value:"",selected:"nearby-attractions",pyrmont:new google.maps.LatLng(24.1441317,120.69568709999999),service:null,map:null,markers:[{position:{lat:24.0906165,lng:120.6947551},infoText:"<strong>Marker 1</strong>"}]}},watch:{$route:function(t){t.path.indexOf("/nearby-attraction-details/")>-1&&this.getPlaceDetails()}},mounted:function(){console.log("-----------mounted初始化---------------"),navigator.geolocation.getAccurateCurrentPosition(this.onSuccess,this.onError,this.onProgress,{desiredAccuracy:20,maxWait:15e3})},methods:{DetailsCallback:function(t,e){e==google.maps.places.PlacesServiceStatus.OK&&(this.$PostValue({paramName:"$Details",data:t}),this.$PostValue({paramName:"$PhotosUrl",data:t.photos[0].getUrl({maxWidth:document.body.clientWidth,maxHeight:.2*document.body.clientHeight})}))},goto:function(t){this.$router.push(t)},onSuccess:function(t){if(console.log(t),this.$DIS.GetDistance(this.$locationLat,this.$locationLng,t.coords.latitude,t.coords.longitude)<1e3)return this.$PostValue({paramName:"$locationLat",data:t.coords.latitude}),void this.$PostValue({paramName:"$locationLng",data:t.coords.longitude});this.$PostValue({paramName:"$locationLat",data:t.coords.latitude}),this.$PostValue({paramName:"$locationLng",data:t.coords.longitude}),this.pyrmont=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),this.map=new google.maps.Map(document.getElementById("map"),{center:this.pyrmont,zoom:15});var e={location:this.pyrmont,radius:"5000",type:["tourist_attraction"]};this.service=new google.maps.places.PlacesService(map),this.service.nearbySearch(e,this.getNearbyAttractionsCallback),this.markers=[{position:{lat:t.coords.latitude,lng:t.coords.longitude}}],this.$route.path.indexOf("/nearby-attraction-details/")>-1&&this.getPlaceDetails()},getPlaceDetails:function(){var t={placeId:this.$route.params.id,fields:["name","rating","formatted_phone_number","geometry","reviews","photos","formatted_address"]};this.service.getDetails(t,this.DetailsCallback)},onError:function(t){console.log(t)},onProgress:function(t){console.log(t)},getNearbyAttractionsCallback:function(t,e){e==google.maps.places.PlacesServiceStatus.OK&&(console.log(t),this.$PostValue({paramName:"$NearbyAttractionsList",data:t}),this.$PostValue({paramName:"$loading",data:!1}))}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"map"}}),t._v(" "),a("mt-search",{directives:[{name:"show",rawName:"v-show",value:"/nearby-attractions"==t.$route.path,expression:"$route.path=='/nearby-attractions'"}],staticStyle:{height:"10%"},attrs:{"cancel-text":"取消",placeholder:"搜索"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("router-view"),t._v(" "),a("mt-tabbar",{staticStyle:{position:"fixed",bottom:"0px",height:"10vh"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"nearby-attractions"}},[a("div",{staticClass:"mt-tab-item",on:{click:function(e){return t.goto("/nearby-attractions")}}},[a("div",{staticClass:"near"}),t._v("\n        附近景點\n      ")])]),t._v(" "),a("mt-tab-item",{attrs:{id:"popular-destination"}},[a("div",{staticClass:"mt-tab-item",on:{click:function(e){return t.goto("/popular-destination")}}},[a("div",{staticClass:"hot"}),t._v("\n        熱門景點\n      ")])]),t._v(" "),a("mt-tab-item",{attrs:{id:"tab3"}},[a("div",{staticClass:"mt-tab-item"},[a("div",{staticClass:"new"}),t._v("\n        新進熱點\n      ")])]),t._v(" "),a("mt-tab-item",{attrs:{id:"tab4"}},[a("div",{staticClass:"mt-tab-item"},[a("div",{staticClass:"news"}),t._v("\n        旅遊手記\n      ")])])],1)],1)},staticRenderFns:[]};var v=a("VU/8")(g,p,!1,function(t){a("rgwV")},null,null).exports,f={name:"NearbyAttractions",extends:l,data:function(){return{loading:!0}},mounted:function(){},methods:{marker:function(){this.zoom=20},clickNearByAttraction:function(t){this.$router.push("/nearby-attraction-details/"+t)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Nearby"},t._l(t.$NearbyAttractionsList,function(e,n){return a("div",{key:n,staticClass:"na-card",on:{click:function(a){return t.clickNearByAttraction(e.place_id)}}},[a("img",{staticClass:"na-img",attrs:{src:e.photos[0].getUrl({maxWidth:400,maxHeight:400}),alt:""}}),t._v(" "),a("div",{staticClass:"na-decript"},[a("img",{staticStyle:{width:"30px",height:"30px",float:"left","margin-top":"-5px"},attrs:{src:e.icon,alt:""}}),t._v(" "),a("span",{staticClass:"na-title"},[t._v(t._s(e.name))]),a("br"),t._v(" "),a("hr",{staticStyle:{"margin-top":"-1px"}}),t._v("\n      地址:"+t._s(e.vicinity)),a("br"),t._v("\n      獲得總星數:"+t._s(e.user_ratings_total)),a("br"),t._v("\n      星數:"+t._s(e.rating)),a("div",{staticClass:"star"}),a("br"),t._v("\n      距離:"+t._s(t.$DIS.GetDistance(t.$locationLat,t.$locationLng,e.geometry.location.lat(),e.geometry.location.lng())>1e3?t.$DIS.GetDistance(t.$locationLat,t.$locationLng,e.geometry.location.lat(),e.geometry.location.lng())/1e3+" 公里":t.$DIS.GetDistance(t.$locationLat,t.$locationLng,e.geometry.location.lat(),e.geometry.location.lng())+" 公尺")+"\n    ")])])}),0)},staticRenderFns:[]};var b=a("VU/8")(f,_,!1,function(t){a("5fH6")},"data-v-c7f81dea",null).exports,y={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("熱門景點")])},staticRenderFns:[]};var $=a("VU/8")({},y,!1,function(t){a("WS6l")},null,null).exports,x={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("8888888")])},staticRenderFns:[]};var w=a("VU/8")({},x,!1,function(t){a("1q8h")},null,null).exports,D={extends:l,data:function(){return{clientWidth:document.body.clientWidth}},computed:{lat:function(){if(""!=this.$Details)return this.$Details.geometry.location.lat()},lng:function(){if(""!=this.$Details)return this.$Details.geometry.location.lng()}},mounted:function(){},methods:{openGoogleMap:function(){this.$router.push("/google-map/")}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details-bgc"},[a("mt-header",{attrs:{title:"景點資訊"}},[a("router-link",{attrs:{slot:"left",to:"/nearby-attractions"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),t._v(" "),a("mt-button",{attrs:{slot:"right",icon:"more"},slot:"right"})],1),t._v(" "),a("div",{staticClass:"details-card"},[a("div",{staticClass:"details-title"},[t._v("\n      "+t._s(t.$Details.name)+"\n    ")]),t._v(" "),a("img",{staticStyle:{display:"block"},attrs:{width:.9*t.clientWidth,src:t.$PhotosUrl}}),t._v(" "),a("div",{staticClass:"details-inf"},[t._v("\n      "+t._s(t.$Details.formatted_phone_number)),a("br"),t._v(" "),a("div",{staticStyle:{color:"white"}},[t._v(t._s(t.$Details.formatted_address))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"comment-title"},[t._v("真心評論")]),t._v(" "),t._l(t.$Details.reviews,function(e,n){return a("div",{key:n},[a("div",{staticClass:"comment"},[a("div",{staticClass:"comment-user"},[a("img",{attrs:{width:"25px;",src:e.profile_photo_url,alt:""}}),t._v(" "),a("span",{staticClass:"comment-name"},[t._v(t._s(e.author_name))])]),t._v(" "),a("span",{staticClass:"comment-text"},[t._v(t._s(e.text))])])])})],2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"flex"}},[e("a",{attrs:{href:"https://www.google.com.tw/maps/place/424台中市和平區武陵路3號",target:"_blank"}},[this._v(" 導航至此 ")]),this._v(" "),e("div",{staticClass:"navigation"})])}]};var A=a("VU/8")(D,S,!1,function(t){a("ZfGN")},null,null).exports,P={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  8888888s....\n")])},staticRenderFns:[]};var N=a("VU/8")({},P,!1,function(t){a("wbTu")},null,null).exports;n.default.use(h.a);var C=new h.a({routes:[{path:"/",name:"SiderBar",redirect:"/nearby-attractions",component:v,children:[{path:"/nearby-attractions",component:b},{path:"/popular-destination",component:$},{path:"/n-a-details",component:w},{path:"/nearby-attraction-details/:id",component:A},{path:"/google-map",component:N}]}]});navigator.geolocation.getAccurateCurrentPosition=function(t,e,a,n){var i,o,s,r=0,c=function(e){t(e)};(n=n||{}).maxWait||(n.maxWait=1e4),n.desiredAccuracy||(n.desiredAccuracy=20),n.timeout||(n.timeout=n.maxWait),n.maximumAge=0,n.enableHighAccuracy=!0,o=navigator.geolocation.watchPosition(function(t){i=t,r+=1,t.coords.accuracy<=n.desiredAccuracy&&r>1?(clearTimeout(s),navigator.geolocation.clearWatch(o),c(t)):a(t)},function(t){clearTimeout(s),navigator.geolocation.clearWatch(o),e(t)},n),s=setTimeout(function(){navigator.geolocation.clearWatch(o),c(i)},n.maxWait)};var L={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var V=a("VU/8")({},L,!1,function(t){a("ym2H")},null,null).exports,k=a("Au9i"),U=a.n(k),M=a("b3L9"),W=a.n(M),E={install:function(t){t.use(U.a),t.use(W.a)}},H=(a("d8/S"),a("fZlU"),a("7QVd"),a("Pipe"),{install:function(t){t.use(E)}}),O={methods:{Rad:function(t){return t*Math.PI/180},GetDistance:function(t,e,a,n){var i=this.Rad(t),o=this.Rad(a),s=i-o,r=this.Rad(e)-this.Rad(n),c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(i)*Math.cos(o)*Math.pow(Math.sin(r/2),2)));return c*=6378.137,c=Math.round(1e4*c)/1e4*1e3}}},R={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var F=a("VU/8")(O,R,!1,function(t){a("Vlr9")},null,null).exports,T={install:function(t,e){var a=new t({name:"DIS",extends:F});t.prototype.$DIS=a}},I=a("mtWM"),j=a.n(I),G={data:function(){return{googlePlaceUrl:"maps/api/place/nearbysearch/json?",googleApiApiKey:"key= AIzaSyAKQLWY4uD8oZ3j2gYyqT-FnwDLIzpcp4Q&",searchType:"types=tourist_attraction&",distance:"radius=1000&"}},methods:{iPost:function(t,e,a,n){var i=this.DateFormatSet(new Date);console.log(t+":iPost :"+i),j.a.post(t,e).then(function(e){console.log(t+":then :"+i),a(e)}).catch(function(e){console.log(t+":catch :"+i),n(e)})},DateFormatSet:function(t){return t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getNearbyAttractions:function(t,e){console.log("-----------getNearbyAttractions--------------");var a="location="+t.coords.latitude+","+t.coords.longitude,n="/data/"+this.googlePlaceUrl+this.googleApiApiKey+this.searchType+this.distance+a;this.$AJ.iPost(n,"",function(t){console.log(JSON.parse(t.request.response)),e(JSON.parse(t.request.response))},function(t){e(0)})}}},q={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var K=a("VU/8")(G,q,!1,function(t){a("Y0tU")},null,null).exports,Q={install:function(t,e){var a=new t({name:"AJ",extends:K});t.prototype.$AJ=a}};n.default.use(s.a);var Y=new s.a.Store({state:{$NearbyAttractionsList:[],$locationLat:"",$locationLng:"",$loading:!0,$Details:"",$PhotosUrl:""},mutations:{$PostValue:function(t,e){t[e.paramName]=e.data}}}),J=a("QhtY"),Z=a.n(J);n.default.use(Z.a),n.default.use(Q),n.default.use(H),n.default.use(T),n.default.use(V),n.default.config.productionTip=!1,document.addEventListener("deviceready",function(){new n.default({el:"#app",router:C,store:Y,template:"<App/>",components:{App:m}}),window.navigator.splashscreen.hide()},!1)},Pipe:function(t,e){},QK3a:function(t,e,a){t.exports=a.p+"img/load.7a4dbb5.gif"},TAHN:function(t,e){},Vlr9:function(t,e){},WS6l:function(t,e){},Y0tU:function(t,e){},ZfGN:function(t,e){},"d8/S":function(t,e){},fZlU:function(t,e){},rgwV:function(t,e){},wbTu:function(t,e){},ym2H:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d598bdaa6d2355bb5021.js.map